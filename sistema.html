<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gerenciamento - Loja Digital</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
        }
        .fade-in {
            animation: fadeIn 0.3s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .slide-down {
            animation: slideDown 0.2s ease-out;
        }
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Desktop Sidebar Styles */
        @media (min-width: 1024px) {
            .sidebar-collapsed {
                width: 60px;
            }
            .sidebar-expanded {
                width: 280px;
            }
            .content-shifted {
                margin-left: 280px;
            }
            .content-full {
                margin-left: 60px;
            }
        }
        
        /* Mobile Sidebar Styles */
        @media (max-width: 1023px) {
            .sidebar-mobile {
                transform: translateX(-100%);
                width: 280px;
            }
            .sidebar-mobile.open {
                transform: translateX(0);
            }
            .content-mobile {
                margin-left: 0;
            }
            .mobile-overlay {
                display: none;
                position: fixed;
                inset: 0;
                background: rgba(0, 0, 0, 0.5);
                z-index: 25;
            }
            .mobile-overlay.active {
                display: block;
            }
        }
        
        /* Header Responsive */
        @media (max-width: 768px) {
            .header-actions {
                flex-wrap: wrap;
                gap: 0.5rem;
            }
            .header-actions button {
                padding: 0.5rem 0.75rem;
                font-size: 0.75rem;
            }
        }
        
        /* Preview Responsive */
        .preview-desktop {
            width: 100%;
            max-width: 1200px;
            height: 600px;
        }
        .preview-mobile {
            width: 100%;
            max-width: 375px;
            height: 667px;
            margin: 0 auto;
        }
        
        @media (max-width: 768px) {
            .preview-desktop {
                height: 400px;
            }
            .preview-mobile {
                height: 500px;
            }
        }
        
        /* Form Responsive */
        @media (max-width: 640px) {
            .form-grid {
                grid-template-columns: 1fr !important;
            }
        }
        
        /* Cards Responsive */
        @media (max-width: 640px) {
            .cards-grid {
                grid-template-columns: 1fr !important;
            }
        }
        
        /* Modal Responsive */
        @media (max-width: 640px) {
            .modal-content {
                margin: 1rem;
                width: calc(100% - 2rem);
            }
        }
    </style>
</head>
<body class="bg-gray-50 font-sans">
    <!-- Header -->
    <header id="header" class="bg-white shadow-lg border-b border-gray-200 fixed top-0 left-0 right-0 z-40 transition-all duration-300">
        <div class="flex items-center justify-between px-4 lg:px-6 py-3 lg:py-4">
            <div class="flex items-center space-x-2 lg:space-x-4">
                <button id="toggleSidebar" class="p-2 rounded-lg hover:bg-gray-100 transition-colors duration-200">
                    <svg class="w-5 h-5 lg:w-6 lg:h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
                <h1 class="text-lg lg:text-xl font-bold text-gray-800 hidden sm:block">Sistema de Gerenciamento</h1>
                <h1 class="text-lg font-bold text-gray-800 sm:hidden">Sistema</h1>
            </div>
            
            <div class="header-actions flex items-center space-x-1 lg:space-x-4">
                <div class="flex space-x-1 lg:space-x-2">
                    <button id="saveBtn" class="bg-green-600 hover:bg-green-700 text-white px-2 lg:px-4 py-2 rounded-lg text-xs lg:text-sm font-medium transition-colors duration-200">
                        <span class="hidden sm:inline">SALVAR</span>
                        <span class="sm:hidden">üíæ</span>
                    </button>
                    <button id="editBtn" class="bg-blue-600 hover:bg-blue-700 text-white px-2 lg:px-4 py-2 rounded-lg text-xs lg:text-sm font-medium transition-colors duration-200">
                        <span class="hidden sm:inline">EDITAR</span>
                        <span class="sm:hidden">‚úèÔ∏è</span>
                    </button>
                </div>
                
                <div class="hidden md:flex space-x-2">
                    <button id="importBtn" class="bg-purple-600 hover:bg-purple-700 text-white px-3 lg:px-4 py-2 rounded-lg text-xs lg:text-sm font-medium transition-colors duration-200">
                        <span class="hidden lg:inline">IMPORTAR JSON</span>
                        <span class="lg:hidden">IMPORT</span>
                    </button>
                    <button id="exportBtn" class="bg-orange-600 hover:bg-orange-700 text-white px-3 lg:px-4 py-2 rounded-lg text-xs lg:text-sm font-medium transition-colors duration-200">
                        <span class="hidden lg:inline">EXPORTAR JSON</span>
                        <span class="lg:hidden">EXPORT</span>
                    </button>
                </div>
                
                <div class="flex space-x-1 lg:space-x-2">
                    <button id="publishBtn" class="bg-red-600 hover:bg-red-700 text-white px-2 lg:px-4 py-2 rounded-lg text-xs lg:text-sm font-medium transition-colors duration-200">
                        <span class="hidden sm:inline">PUBLICAR</span>
                        <span class="sm:hidden">üöÄ</span>
                    </button>
                    <button id="visitBtn" class="bg-indigo-600 hover:bg-indigo-700 text-white px-2 lg:px-4 py-2 rounded-lg text-xs lg:text-sm font-medium transition-colors duration-200">
                        <span class="hidden sm:inline">VISITAR</span>
                        <span class="sm:hidden">üëÅÔ∏è</span>
                    </button>
                </div>
                
                <!-- Mobile Menu Button -->
                <button id="mobileMenuBtn" class="md:hidden p-2 rounded-lg hover:bg-gray-100 transition-colors duration-200">
                    <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"></path>
                    </svg>
                </button>
            </div>
        </div>
        
        <!-- Mobile Actions Menu -->
        <div id="mobileActionsMenu" class="md:hidden bg-white border-t border-gray-200 px-4 py-3 hidden">
            <div class="flex flex-wrap gap-2">
                <button id="importBtnMobile" class="bg-purple-600 hover:bg-purple-700 text-white px-3 py-2 rounded-lg text-xs font-medium transition-colors duration-200">
                    IMPORTAR
                </button>
                <button id="exportBtnMobile" class="bg-orange-600 hover:bg-orange-700 text-white px-3 py-2 rounded-lg text-xs font-medium transition-colors duration-200">
                    EXPORTAR
                </button>
            </div>
        </div>
    </header>

    <!-- Mobile Overlay -->
    <div id="mobileOverlay" class="mobile-overlay" onclick="storeManager.closeMobileSidebar()"></div>
    
    <!-- Sidebar -->
    <aside id="sidebar" class="fixed left-0 top-16 lg:top-20 bottom-0 bg-white shadow-lg border-r border-gray-200 z-30 transition-all duration-300 sidebar-expanded lg:sidebar-expanded sidebar-mobile">
        <div class="p-3 lg:p-4">
            <nav class="space-y-1 lg:space-y-2">
                <button class="tab-btn w-full text-left px-3 lg:px-4 py-2 lg:py-3 rounded-lg hover:bg-gray-100 transition-colors duration-200 bg-blue-50 text-blue-700 border-l-4 border-blue-600" data-tab="dados">
                    <div class="flex items-center space-x-2 lg:space-x-3">
                        <svg class="w-4 h-4 lg:w-5 lg:h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                        </svg>
                        <span class="sidebar-text text-sm lg:text-base">DADOS DA LOJA</span>
                    </div>
                </button>
                
                <button class="tab-btn w-full text-left px-3 lg:px-4 py-2 lg:py-3 rounded-lg hover:bg-gray-100 transition-colors duration-200" data-tab="itens">
                    <div class="flex items-center space-x-2 lg:space-x-3">
                        <svg class="w-4 h-4 lg:w-5 lg:h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path>
                        </svg>
                        <span class="sidebar-text text-sm lg:text-base">ITENS</span>
                    </div>
                </button>
                
                <button class="tab-btn w-full text-left px-3 lg:px-4 py-2 lg:py-3 rounded-lg hover:bg-gray-100 transition-colors duration-200" data-tab="customizar">
                    <div class="flex items-center space-x-2 lg:space-x-3">
                        <svg class="w-4 h-4 lg:w-5 lg:h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM7 3H5a2 2 0 00-2 2v12a4 4 0 004 4h2a2 2 0 002-2V5a2 2 0 00-2-2z"></path>
                        </svg>
                        <span class="sidebar-text text-sm lg:text-base">CUSTOMIZAR</span>
                    </div>
                </button>
                
                <button class="tab-btn w-full text-left px-3 lg:px-4 py-2 lg:py-3 rounded-lg hover:bg-gray-100 transition-colors duration-200" data-tab="publicidades">
                    <div class="flex items-center space-x-2 lg:space-x-3">
                        <svg class="w-4 h-4 lg:w-5 lg:h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path>
                        </svg>
                        <span class="sidebar-text text-sm lg:text-base">PUBLICIDADES</span>
                    </div>
                </button>
                
                <button class="tab-btn w-full text-left px-3 lg:px-4 py-2 lg:py-3 rounded-lg hover:bg-gray-100 transition-colors duration-200" data-tab="preview">
                    <div class="flex items-center space-x-2 lg:space-x-3">
                        <svg class="w-4 h-4 lg:w-5 lg:h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                        </svg>
                        <span class="sidebar-text text-sm lg:text-base">PREVIEW</span>
                    </div>
                </button>
            </nav>
        </div>
        
        <div class="absolute bottom-4 left-4 right-4">
            <div class="text-xs text-gray-500 text-center sidebar-text">
                <p>SAC: PIX@XMAIL.NET</p>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <main id="mainContent" class="transition-all duration-300 content-shifted lg:content-shifted content-mobile pt-16 lg:pt-24 pb-8">
        
        <!-- DADOS DA LOJA Tab -->
        <div id="dados-tab" class="tab-content px-4 lg:px-6">
            <div class="max-w-4xl mx-auto space-y-6 lg:space-y-8">
                <h2 class="text-xl lg:text-2xl font-bold text-gray-800 mb-4 lg:mb-6">Dados da Loja</h2>
                
                <!-- Informa√ß√µes B√°sicas -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-4 lg:p-6">
                    <h3 class="text-base lg:text-lg font-semibold text-gray-800 mb-3 lg:mb-4">Informa√ß√µes B√°sicas</h3>
                    <div class="form-grid grid grid-cols-1 md:grid-cols-2 gap-3 lg:gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Nome da Loja</label>
                            <input type="text" id="storeName" class="w-full px-3 lg:px-4 py-2 lg:py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm lg:text-base">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Telefone</label>
                            <input type="tel" id="storePhone" class="w-full px-3 lg:px-4 py-2 lg:py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm lg:text-base">
                        </div>
                        <div class="md:col-span-2">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Endere√ßo</label>
                            <input type="text" id="storeAddress" class="w-full px-3 lg:px-4 py-2 lg:py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm lg:text-base">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">URL da Logo</label>
                            <input type="url" id="storeLogo" class="w-full px-3 lg:px-4 py-2 lg:py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm lg:text-base">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Hor√°rio de Funcionamento</label>
                            <input type="text" id="storeHours" placeholder="Ex: 08:00 - 22:00" class="w-full px-3 lg:px-4 py-2 lg:py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm lg:text-base">
                        </div>
                    </div>
                </div>

                <!-- √Årea de Cobertura -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-4 lg:p-6">
                    <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center mb-4 space-y-2 sm:space-y-0">
                        <h3 class="text-base lg:text-lg font-semibold text-gray-800">√Årea de Cobertura</h3>
                        <button id="addNeighborhoodBtn" class="bg-blue-600 hover:bg-blue-700 text-white px-3 lg:px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200 w-full sm:w-auto">
                            Adicionar Bairro
                        </button>
                    </div>
                    <div id="neighborhoodsList" class="space-y-3">
                        <!-- Neighborhoods will be listed here -->
                    </div>
                </div>

                <!-- Dados de Pagamento -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-4 lg:p-6">
                    <h3 class="text-base lg:text-lg font-semibold text-gray-800 mb-3 lg:mb-4">Dados de Pagamento</h3>
                    
                    <!-- PIX -->
                    <div class="mb-4 lg:mb-6">
                        <h4 class="font-medium text-gray-700 mb-3">PIX</h4>
                        <div class="form-grid grid grid-cols-1 md:grid-cols-2 gap-3 lg:gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Chave PIX</label>
                                <input type="text" id="pixKey" class="w-full px-3 lg:px-4 py-2 lg:py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm lg:text-base">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Nome</label>
                                <input type="text" id="pixName" class="w-full px-3 lg:px-4 py-2 lg:py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm lg:text-base">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Institui√ß√£o</label>
                                <input type="text" id="pixBank" class="w-full px-3 lg:px-4 py-2 lg:py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm lg:text-base">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Ag√™ncia / Conta</label>
                                <input type="text" id="pixAccount" class="w-full px-3 lg:px-4 py-2 lg:py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm lg:text-base">
                            </div>
                        </div>
                    </div>

                    <!-- Bitcoin -->
                    <div>
                        <h4 class="font-medium text-gray-700 mb-3">Bitcoin</h4>
                        <div class="form-grid grid grid-cols-1 md:grid-cols-2 gap-3 lg:gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Chave Bitcoin</label>
                                <input type="text" id="bitcoinKey" class="w-full px-3 lg:px-4 py-2 lg:py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm lg:text-base">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Chave Lightning</label>
                                <input type="text" id="lightningKey" class="w-full px-3 lg:px-4 py-2 lg:py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm lg:text-base">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ITENS Tab -->
        <div id="itens-tab" class="tab-content px-4 lg:px-6 hidden">
            <div class="max-w-6xl mx-auto">
                <h2 class="text-xl lg:text-2xl font-bold text-gray-800 mb-4 lg:mb-6">Gerenciamento de Itens</h2>
                
                <!-- Sub-tabs for Items -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 mb-6">
                    <div class="border-b border-gray-200">
                        <nav class="flex space-x-8 px-6">
                            <button class="item-subtab py-4 px-2 border-b-2 border-blue-600 text-blue-600 font-medium" data-subtab="categorias">
                                Categorias
                            </button>
                            <button class="item-subtab py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700" data-subtab="produtos">
                                Itens
                            </button>
                            <button class="item-subtab py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700" data-subtab="gerenciar">
                                Gerenciar
                            </button>
                        </nav>
                    </div>
                    
                    <!-- Categorias Subtab -->
                    <div id="categorias-subtab" class="item-subtab-content p-6">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-lg font-semibold text-gray-800">Categorias</h3>
                            <button id="createCategoryBtn" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200">
                                Criar Categoria
                            </button>
                        </div>
                        <div id="categoriesList" class="space-y-3">
                            <!-- Categories will be listed here -->
                        </div>
                    </div>
                    
                    <!-- Produtos Subtab -->
                    <div id="produtos-subtab" class="item-subtab-content p-6 hidden">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-lg font-semibold text-gray-800">Itens do Card√°pio</h3>
                            <button id="addItemBtn" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200">
                                Adicionar Item
                            </button>
                        </div>
                        <div id="itemsList" class="cards-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 lg:gap-6">
                            <!-- Items will be listed here -->
                        </div>
                    </div>
                    
                    <!-- Gerenciar Subtab -->
                    <div id="gerenciar-subtab" class="item-subtab-content p-6 hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                            <!-- Promo√ß√µes -->
                            <div>
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="text-lg font-semibold text-gray-800">Promo√ß√µes</h3>
                                    <button id="createPromoBtn" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200">
                                        Criar Promo√ß√£o
                                    </button>
                                </div>
                                <div id="promosList" class="space-y-3">
                                    <!-- Promotions will be listed here -->
                                </div>
                            </div>
                            
                            <!-- Modos -->
                            <div>
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="text-lg font-semibold text-gray-800">Modos de Venda</h3>
                                    <button id="createModeBtn" class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200">
                                        Criar Modo
                                    </button>
                                </div>
                                <div id="modesList" class="space-y-3">
                                    <!-- Modes will be listed here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- CUSTOMIZAR Tab -->
        <div id="customizar-tab" class="tab-content px-4 lg:px-6 hidden">
            <div class="max-w-4xl mx-auto space-y-6 lg:space-y-8">
                <h2 class="text-xl lg:text-2xl font-bold text-gray-800 mb-4 lg:mb-6">Customizar Apar√™ncia</h2>
                
                <!-- Cores -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Cores</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Cor Principal</label>
                            <input type="color" id="primaryColor" class="w-full h-12 border border-gray-300 rounded-lg">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Cor Secund√°ria</label>
                            <input type="color" id="secondaryColor" class="w-full h-12 border border-gray-300 rounded-lg">
                        </div>
                    </div>
                </div>

                <!-- Fundo -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Fundo</h3>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Cor de Fundo</label>
                            <input type="color" id="backgroundColor" class="w-full h-12 border border-gray-300 rounded-lg">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">URL da Imagem de Fundo</label>
                            <input type="url" id="backgroundImage" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                    </div>
                </div>

                <!-- Carrinho -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Carrinho</h3>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Cor do Carrinho</label>
                            <input type="color" id="cartColor" class="w-full h-12 border border-gray-300 rounded-lg">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">URL da Imagem do Carrinho</label>
                            <input type="url" id="cartImage" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                    </div>
                </div>

                <!-- M√∫sica -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">M√∫sica</h3>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">URL da M√∫sica (YouTube ou Spotify)</label>
                            <input type="url" id="musicUrl" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        <div class="flex items-center space-x-6">
                            <label class="flex items-center">
                                <input type="checkbox" id="autoplay" class="rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                <span class="ml-2 text-sm text-gray-700">Autoplay</span>
                            </label>
                            <div class="flex items-center space-x-2">
                                <label class="text-sm text-gray-700">Volume:</label>
                                <input type="range" id="volume" min="0" max="100" value="50" class="w-24">
                                <span id="volumeValue" class="text-sm text-gray-600">50%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- PUBLICIDADES Tab -->
        <div id="publicidades-tab" class="tab-content px-4 lg:px-6 hidden">
            <div class="max-w-6xl mx-auto space-y-6 lg:space-y-8">
                <h2 class="text-xl lg:text-2xl font-bold text-gray-800 mb-4 lg:mb-6">Publicidades</h2>
                
                <!-- Banners -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Banners</h3>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="space-y-4" id="bannersContainer">
                            <!-- Banner slots will be generated here -->
                        </div>
                    </div>
                </div>

                <!-- Mensagens -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Mensagens</h3>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Mensagem de Boas-vindas (Pop-up)</label>
                            <textarea id="welcomeMessage" rows="3" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none" onchange="storeManager.updateAdvertisingMessages()"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Mensagem Promocional (Pop-up ao adicionar 1¬∫ item)</label>
                            <textarea id="promoMessage" rows="3" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none" onchange="storeManager.updateAdvertisingMessages()"></textarea>
                        </div>
                    </div>
                </div>

                <!-- Cupons -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-semibold text-gray-800">Cupons</h3>
                        <button id="createCouponBtn" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200">
                            Criar Cupom
                        </button>
                    </div>
                    <div id="couponsList" class="space-y-3">
                        <!-- Coupons will be listed here -->
                    </div>
                </div>

                <!-- Redes Sociais -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-semibold text-gray-800">Redes Sociais</h3>
                        <button id="addSocialBtn" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200">
                            Adicionar Rede Social
                        </button>
                    </div>
                    <div id="socialsList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <!-- Social networks will be listed here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- PREVIEW Tab -->
        <div id="preview-tab" class="tab-content px-4 lg:px-6 hidden">
            <div class="max-w-7xl mx-auto">
                <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center mb-4 lg:mb-6 space-y-3 sm:space-y-0">
                    <h2 class="text-xl lg:text-2xl font-bold text-gray-800">Preview do Totem</h2>
                    <div class="flex space-x-2">
                        <button id="previewDesktop" class="bg-blue-600 hover:bg-blue-700 text-white px-3 lg:px-4 py-2 rounded-lg font-medium transition-colors duration-200 text-sm lg:text-base">
                            Desktop
                        </button>
                        <button id="previewMobile" class="bg-gray-600 hover:bg-gray-700 text-white px-3 lg:px-4 py-2 rounded-lg font-medium transition-colors duration-200 text-sm lg:text-base">
                            Mobile
                        </button>
                    </div>
                </div>
                
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 overflow-auto">
                    <div id="previewContainer" class="preview-desktop">
                        <iframe id="previewFrame" class="w-full h-full border border-gray-300 rounded-lg" src="about:blank"></iframe>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modals will be added here -->
    <div id="modalsContainer"></div>

    <!-- Success/Error Messages -->
    <div id="messageContainer" class="fixed top-20 right-4 z-50 space-y-2"></div>

    <script>
        class StoreManager {
            constructor() {
                this.data = this.loadData();
                this.init();
            }

            init() {
                this.bindEvents();
                this.loadFormData();
                this.renderAll();
            }

            loadData() {
                const defaultData = {
                    store: {
                        name: '',
                        phone: '',
                        address: '',
                        logo: '',
                        hours: '',
                        neighborhoods: [],
                        payment: {
                            pix: { key: '', name: '', bank: '', account: '' },
                            bitcoin: { key: '', lightning: '' }
                        }
                    },
                    items: {
                        categories: [],
                        products: [],
                        promotions: [],
                        modes: []
                    },
                    customization: {
                        colors: { primary: '#3B82F6', secondary: '#1E40AF' },
                        background: { color: '#F3F4F6', image: '' },
                        cart: { color: '#10B981', image: '' },
                        music: { url: '', autoplay: false, volume: 50 }
                    },
                    advertising: {
                        banners: Array(5).fill({ image: '', link: '' }),
                        messages: { welcome: '', promo: '' },
                        coupons: [],
                        social: []
                    }
                };
                
                return JSON.parse(localStorage.getItem('storeData')) || defaultData;
            }

            saveData() {
                localStorage.setItem('storeData', JSON.stringify(this.data));
                this.showMessage('Dados salvos com sucesso!', 'success');
            }

            bindEvents() {
                // Sidebar toggle
                document.getElementById('toggleSidebar').addEventListener('click', () => this.toggleSidebar());
                
                // Tab navigation
                document.querySelectorAll('.tab-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const target = e.target.closest('.tab-btn');
                        if (target && target.dataset.tab) {
                            this.switchTab(target.dataset.tab);
                        }
                    });
                });

                // Item subtabs
                document.querySelectorAll('.item-subtab').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const target = e.target.closest('.item-subtab');
                        if (target && target.dataset.subtab) {
                            this.switchItemSubtab(target.dataset.subtab);
                        }
                    });
                });

                // Global actions
                document.getElementById('saveBtn').addEventListener('click', () => this.saveData());
                document.getElementById('editBtn').addEventListener('click', () => this.enableEdit());
                document.getElementById('importBtn').addEventListener('click', () => this.importData());
                document.getElementById('exportBtn').addEventListener('click', () => this.exportData());
                document.getElementById('publishBtn').addEventListener('click', () => this.publishTotem());
                document.getElementById('visitBtn').addEventListener('click', () => this.visitTotem());

                // Mobile actions
                document.getElementById('importBtnMobile').addEventListener('click', () => this.importData());
                document.getElementById('exportBtnMobile').addEventListener('click', () => this.exportData());
                
                // Mobile menu toggle
                document.getElementById('mobileMenuBtn').addEventListener('click', () => {
                    const menu = document.getElementById('mobileActionsMenu');
                    menu.classList.toggle('hidden');
                });

                // Preview buttons
                document.getElementById('previewDesktop').addEventListener('click', () => this.setPreviewMode('desktop'));
                document.getElementById('previewMobile').addEventListener('click', () => this.setPreviewMode('mobile'));

                // Add buttons
                this.bindAddButtons();

                // Form inputs
                this.bindFormInputs();
            }

            bindAddButtons() {
                // Add neighborhood button
                const addNeighborhoodBtn = document.getElementById('addNeighborhoodBtn');
                if (addNeighborhoodBtn) {
                    addNeighborhoodBtn.addEventListener('click', () => this.addNeighborhood());
                }

                // Add category button
                const createCategoryBtn = document.getElementById('createCategoryBtn');
                if (createCategoryBtn) {
                    createCategoryBtn.addEventListener('click', () => this.createCategory());
                }

                // Add item button
                const addItemBtn = document.getElementById('addItemBtn');
                if (addItemBtn) {
                    addItemBtn.addEventListener('click', () => this.addItem());
                }

                // Add promotion button
                const createPromoBtn = document.getElementById('createPromoBtn');
                if (createPromoBtn) {
                    createPromoBtn.addEventListener('click', () => this.createPromotion());
                }

                // Add mode button
                const createModeBtn = document.getElementById('createModeBtn');
                if (createModeBtn) {
                    createModeBtn.addEventListener('click', () => this.createMode());
                }

                // Add coupon button
                const createCouponBtn = document.getElementById('createCouponBtn');
                if (createCouponBtn) {
                    createCouponBtn.addEventListener('click', () => this.createCoupon());
                }

                // Add social button
                const addSocialBtn = document.getElementById('addSocialBtn');
                if (addSocialBtn) {
                    addSocialBtn.addEventListener('click', () => this.addSocial());
                }
            }

            bindFormInputs() {
                // Store data inputs
                const storeInputs = ['storeName', 'storePhone', 'storeAddress', 'storeLogo', 'storeHours'];
                storeInputs.forEach(id => {
                    const element = document.getElementById(id);
                    if (element) {
                        element.addEventListener('input', () => this.updateStoreData());
                    }
                });

                // Payment inputs
                const paymentInputs = ['pixKey', 'pixName', 'pixBank', 'pixAccount', 'bitcoinKey', 'lightningKey'];
                paymentInputs.forEach(id => {
                    const element = document.getElementById(id);
                    if (element) {
                        element.addEventListener('input', () => this.updatePaymentData());
                    }
                });

                // Customization inputs
                const customInputs = ['primaryColor', 'secondaryColor', 'backgroundColor', 'backgroundImage', 'cartColor', 'cartImage', 'musicUrl', 'autoplay', 'volume'];
                customInputs.forEach(id => {
                    const element = document.getElementById(id);
                    if (element) {
                        element.addEventListener('input', () => this.updateCustomization());
                        element.addEventListener('change', () => this.updateCustomization());
                    }
                });

                // Volume display
                const volumeSlider = document.getElementById('volume');
                if (volumeSlider) {
                    volumeSlider.addEventListener('input', (e) => {
                        document.getElementById('volumeValue').textContent = e.target.value + '%';
                    });
                }
            }

            toggleSidebar() {
                const sidebar = document.getElementById('sidebar');
                const mainContent = document.getElementById('mainContent');
                const overlay = document.getElementById('mobileOverlay');
                const sidebarTexts = document.querySelectorAll('.sidebar-text');
                
                // Check if mobile
                if (window.innerWidth < 1024) {
                    // Mobile behavior
                    if (sidebar.classList.contains('open')) {
                        sidebar.classList.remove('open');
                        overlay.classList.remove('active');
                    } else {
                        sidebar.classList.add('open');
                        overlay.classList.add('active');
                    }
                } else {
                    // Desktop behavior
                    if (sidebar.classList.contains('sidebar-expanded')) {
                        sidebar.classList.remove('sidebar-expanded');
                        sidebar.classList.add('sidebar-collapsed');
                        mainContent.classList.remove('content-shifted');
                        mainContent.classList.add('content-full');
                        sidebarTexts.forEach(text => text.style.display = 'none');
                    } else {
                        sidebar.classList.remove('sidebar-collapsed');
                        sidebar.classList.add('sidebar-expanded');
                        mainContent.classList.remove('content-full');
                        mainContent.classList.add('content-shifted');
                        sidebarTexts.forEach(text => text.style.display = 'block');
                    }
                }
            }

            closeMobileSidebar() {
                const sidebar = document.getElementById('sidebar');
                const overlay = document.getElementById('mobileOverlay');
                sidebar.classList.remove('open');
                overlay.classList.remove('active');
            }

            switchTab(tabName) {
                // Update tab buttons
                document.querySelectorAll('.tab-btn').forEach(btn => {
                    btn.classList.remove('bg-blue-50', 'text-blue-700', 'border-l-4', 'border-blue-600');
                    if (btn.dataset.tab === tabName) {
                        btn.classList.add('bg-blue-50', 'text-blue-700', 'border-l-4', 'border-blue-600');
                    }
                });

                // Show/hide tab content
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.add('hidden');
                });
                document.getElementById(tabName + '-tab').classList.remove('hidden');

                // Special handling for preview tab
                if (tabName === 'preview') {
                    this.updatePreview();
                }
            }

            switchItemSubtab(subtabName) {
                // Update subtab buttons
                document.querySelectorAll('.item-subtab').forEach(btn => {
                    btn.classList.remove('border-blue-600', 'text-blue-600');
                    btn.classList.add('border-transparent', 'text-gray-500');
                    if (btn.dataset.subtab === subtabName) {
                        btn.classList.remove('border-transparent', 'text-gray-500');
                        btn.classList.add('border-blue-600', 'text-blue-600');
                    }
                });

                // Show/hide subtab content
                document.querySelectorAll('.item-subtab-content').forEach(content => {
                    content.classList.add('hidden');
                });
                document.getElementById(subtabName + '-subtab').classList.remove('hidden');
            }

            loadFormData() {
                // Load store data
                document.getElementById('storeName').value = this.data.store.name || '';
                document.getElementById('storePhone').value = this.data.store.phone || '';
                document.getElementById('storeAddress').value = this.data.store.address || '';
                document.getElementById('storeLogo').value = this.data.store.logo || '';
                document.getElementById('storeHours').value = this.data.store.hours || '';

                // Load payment data
                document.getElementById('pixKey').value = this.data.store.payment.pix.key || '';
                document.getElementById('pixName').value = this.data.store.payment.pix.name || '';
                document.getElementById('pixBank').value = this.data.store.payment.pix.bank || '';
                document.getElementById('pixAccount').value = this.data.store.payment.pix.account || '';
                document.getElementById('bitcoinKey').value = this.data.store.payment.bitcoin.key || '';
                document.getElementById('lightningKey').value = this.data.store.payment.bitcoin.lightning || '';

                // Load customization data
                document.getElementById('primaryColor').value = this.data.customization.colors.primary || '#3B82F6';
                document.getElementById('secondaryColor').value = this.data.customization.colors.secondary || '#1E40AF';
                document.getElementById('backgroundColor').value = this.data.customization.background.color || '#F3F4F6';
                document.getElementById('backgroundImage').value = this.data.customization.background.image || '';
                document.getElementById('cartColor').value = this.data.customization.cart.color || '#10B981';
                document.getElementById('cartImage').value = this.data.customization.cart.image || '';
                document.getElementById('musicUrl').value = this.data.customization.music.url || '';
                document.getElementById('autoplay').checked = this.data.customization.music.autoplay || false;
                document.getElementById('volume').value = this.data.customization.music.volume || 50;
                document.getElementById('volumeValue').textContent = (this.data.customization.music.volume || 50) + '%';

                // Load advertising messages
                document.getElementById('welcomeMessage').value = this.data.advertising.messages.welcome || '';
                document.getElementById('promoMessage').value = this.data.advertising.messages.promo || '';
            }

            updateStoreData() {
                this.data.store.name = document.getElementById('storeName').value;
                this.data.store.phone = document.getElementById('storePhone').value;
                this.data.store.address = document.getElementById('storeAddress').value;
                this.data.store.logo = document.getElementById('storeLogo').value;
                this.data.store.hours = document.getElementById('storeHours').value;
            }

            updatePaymentData() {
                this.data.store.payment.pix.key = document.getElementById('pixKey').value;
                this.data.store.payment.pix.name = document.getElementById('pixName').value;
                this.data.store.payment.pix.bank = document.getElementById('pixBank').value;
                this.data.store.payment.pix.account = document.getElementById('pixAccount').value;
                this.data.store.payment.bitcoin.key = document.getElementById('bitcoinKey').value;
                this.data.store.payment.bitcoin.lightning = document.getElementById('lightningKey').value;
            }

            updateCustomization() {
                this.data.customization.colors.primary = document.getElementById('primaryColor').value;
                this.data.customization.colors.secondary = document.getElementById('secondaryColor').value;
                this.data.customization.background.color = document.getElementById('backgroundColor').value;
                this.data.customization.background.image = document.getElementById('backgroundImage').value;
                this.data.customization.cart.color = document.getElementById('cartColor').value;
                this.data.customization.cart.image = document.getElementById('cartImage').value;
                this.data.customization.music.url = document.getElementById('musicUrl').value;
                this.data.customization.music.autoplay = document.getElementById('autoplay').checked;
                this.data.customization.music.volume = parseInt(document.getElementById('volume').value);
            }

            updateAdvertisingMessages() {
                this.data.advertising.messages.welcome = document.getElementById('welcomeMessage').value;
                this.data.advertising.messages.promo = document.getElementById('promoMessage').value;
            }

            renderAll() {
                this.renderNeighborhoods();
                this.renderCategories();
                this.renderItems();
                this.renderPromotions();
                this.renderModes();
                this.renderBanners();
                this.renderCoupons();
                this.renderSocials();
            }

            renderNeighborhoods() {
                const container = document.getElementById('neighborhoodsList');
                if (!this.data.store.neighborhoods.length) {
                    container.innerHTML = '<p class="text-gray-500 text-center py-4">Nenhum bairro cadastrado</p>';
                    return;
                }

                container.innerHTML = this.data.store.neighborhoods.map(neighborhood => `
                    <div class="flex items-center justify-between p-4 border border-gray-200 rounded-lg">
                        <div>
                            <span class="font-medium">${neighborhood.name}</span>
                            <span class="text-gray-500 ml-2">R$ ${neighborhood.fee.toFixed(2)}</span>
                        </div>
                        <div class="flex space-x-2">
                            <button onclick="storeManager.editNeighborhood('${neighborhood.id}')" class="text-blue-600 hover:text-blue-800">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                </svg>
                            </button>
                            <button onclick="storeManager.deleteNeighborhood('${neighborhood.id}')" class="text-red-600 hover:text-red-800">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                `).join('');
            }

            renderCategories() {
                const container = document.getElementById('categoriesList');
                if (!this.data.items.categories.length) {
                    container.innerHTML = '<p class="text-gray-500 text-center py-4">Nenhuma categoria cadastrada</p>';
                    return;
                }

                container.innerHTML = this.data.items.categories.map(category => `
                    <div class="flex items-center justify-between p-4 border border-gray-200 rounded-lg">
                        <div>
                            <span class="font-medium">${category.name}</span>
                            ${category.subcategory ? `<span class="text-gray-500 ml-2">‚Üí ${category.subcategory}</span>` : ''}
                        </div>
                        <div class="flex space-x-2">
                            <button onclick="storeManager.editCategory('${category.id}')" class="text-blue-600 hover:text-blue-800">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                </svg>
                            </button>
                            <button onclick="storeManager.deleteCategory('${category.id}')" class="text-red-600 hover:text-red-800">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                `).join('');
            }

            renderItems() {
                const container = document.getElementById('itemsList');
                if (!this.data.items.products.length) {
                    container.innerHTML = '<div class="col-span-full text-gray-500 text-center py-8">Nenhum item cadastrado</div>';
                    return;
                }

                container.innerHTML = this.data.items.products.map(item => `
                    <div class="bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow duration-200">
                        ${item.image ? `<img src="${item.image}" alt="${item.name}" class="w-full h-32 object-cover rounded-lg mb-3">` : ''}
                        <h4 class="font-medium text-gray-800 mb-1">${item.name}</h4>
                        <p class="text-sm text-gray-600 mb-2">${item.category}</p>
                        <p class="text-lg font-bold text-green-600 mb-2">R$ ${item.price.toFixed(2)}</p>
                        <p class="text-sm text-gray-500 mb-3">${item.description || 'Sem descri√ß√£o'}</p>
                        <div class="flex justify-between items-center">
                            <span class="text-xs px-2 py-1 rounded-full ${item.active ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}">
                                ${item.active ? 'Ativo' : 'Inativo'}
                            </span>
                            <div class="flex space-x-2">
                                <button onclick="storeManager.editItem('${item.id}')" class="text-blue-600 hover:text-blue-800">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                    </svg>
                                </button>
                                <button onclick="storeManager.deleteItem('${item.id}')" class="text-red-600 hover:text-red-800">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('');
            }

            renderPromotions() {
                const container = document.getElementById('promosList');
                if (!this.data.items.promotions.length) {
                    container.innerHTML = '<p class="text-gray-500 text-center py-4">Nenhuma promo√ß√£o cadastrada</p>';
                    return;
                }

                container.innerHTML = this.data.items.promotions.map(promo => `
                    <div class="flex items-center justify-between p-4 border border-gray-200 rounded-lg">
                        <div>
                            <span class="font-medium">${promo.name}</span>
                            <span class="text-green-600 ml-2">R$ ${promo.price.toFixed(2)}</span>
                        </div>
                        <div class="flex space-x-2">
                            <button onclick="storeManager.editPromotion('${promo.id}')" class="text-blue-600 hover:text-blue-800">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                </svg>
                            </button>
                            <button onclick="storeManager.deletePromotion('${promo.id}')" class="text-red-600 hover:text-red-800">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                `).join('');
            }

            renderModes() {
                const container = document.getElementById('modesList');
                if (!this.data.items.modes.length) {
                    container.innerHTML = '<p class="text-gray-500 text-center py-4">Nenhum modo cadastrado</p>';
                    return;
                }

                container.innerHTML = this.data.items.modes.map(mode => `
                    <div class="flex items-center justify-between p-4 border border-gray-200 rounded-lg">
                        <div>
                            <span class="font-medium">${mode.name}</span>
                            <span class="text-gray-500 ml-2">(${mode.unit})</span>
                        </div>
                        <div class="flex space-x-2">
                            <button onclick="storeManager.editMode('${mode.id}')" class="text-blue-600 hover:text-blue-800">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                </svg>
                            </button>
                            <button onclick="storeManager.deleteMode('${mode.id}')" class="text-red-600 hover:text-red-800">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                `).join('');
            }

            renderBanners() {
                const container = document.getElementById('bannersContainer');
                container.innerHTML = '';
                
                for (let i = 0; i < 5; i++) {
                    const banner = this.data.advertising.banners[i] || { image: '', link: '' };
                    const bannerDiv = document.createElement('div');
                    bannerDiv.className = 'space-y-2';
                    bannerDiv.innerHTML = `
                        <label class="block text-sm font-medium text-gray-700">Banner ${i + 1}</label>
                        <input type="url" placeholder="URL da Imagem" value="${banner.image}" 
                               onchange="storeManager.updateBanner(${i}, 'image', this.value)"
                               class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm">
                        <input type="url" placeholder="Link de Destino" value="${banner.link}"
                               onchange="storeManager.updateBanner(${i}, 'link', this.value)"
                               class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm">
                    `;
                    container.appendChild(bannerDiv);
                }
            }

            renderCoupons() {
                const container = document.getElementById('couponsList');
                if (!this.data.advertising.coupons.length) {
                    container.innerHTML = '<p class="text-gray-500 text-center py-4">Nenhum cupom cadastrado</p>';
                    return;
                }

                container.innerHTML = this.data.advertising.coupons.map(coupon => `
                    <div class="flex items-center justify-between p-4 border border-gray-200 rounded-lg">
                        <div>
                            <span class="font-medium">${coupon.code}</span>
                            <span class="text-green-600 ml-2">${coupon.type === 'percent' ? coupon.value + '%' : 'R$ ' + coupon.value.toFixed(2)}</span>
                            <span class="text-gray-500 ml-2">V√°lido at√©: ${coupon.expiry}</span>
                        </div>
                        <div class="flex space-x-2">
                            <button onclick="storeManager.editCoupon('${coupon.id}')" class="text-blue-600 hover:text-blue-800">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                </svg>
                            </button>
                            <button onclick="storeManager.deleteCoupon('${coupon.id}')" class="text-red-600 hover:text-red-800">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                `).join('');
            }

            renderSocials() {
                const container = document.getElementById('socialsList');
                if (!this.data.advertising.social.length) {
                    container.innerHTML = '<div class="col-span-full text-gray-500 text-center py-4">Nenhuma rede social cadastrada</div>';
                    return;
                }

                container.innerHTML = this.data.advertising.social.map(social => `
                    <div class="flex items-center justify-between p-4 border border-gray-200 rounded-lg">
                        <div class="flex items-center space-x-3">
                            <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center">
                                <span class="text-blue-600 font-medium text-sm">${social.name.charAt(0).toUpperCase()}</span>
                            </div>
                            <div>
                                <span class="font-medium">${social.name}</span>
                                <p class="text-sm text-gray-500">${social.url}</p>
                            </div>
                        </div>
                        <div class="flex space-x-2">
                            <button onclick="storeManager.editSocial('${social.id}')" class="text-blue-600 hover:text-blue-800">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                </svg>
                            </button>
                            <button onclick="storeManager.deleteSocial('${social.id}')" class="text-red-600 hover:text-red-800">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                `).join('');
            }

            updateBanner(index, field, value) {
                if (!this.data.advertising.banners[index]) {
                    this.data.advertising.banners[index] = { image: '', link: '' };
                }
                this.data.advertising.banners[index][field] = value;
            }

            // CRUD Methods for Neighborhoods
            addNeighborhood() {
                this.showModal('Adicionar Bairro', `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Nome do Bairro</label>
                            <input type="text" id="neighborhoodName" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Taxa de Entrega (R$)</label>
                            <input type="number" id="neighborhoodFee" step="0.01" min="0" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                    </div>
                `, () => {
                    const name = document.getElementById('neighborhoodName').value.trim();
                    const fee = parseFloat(document.getElementById('neighborhoodFee').value) || 0;
                    
                    if (!name) {
                        this.showMessage('Nome do bairro √© obrigat√≥rio', 'error');
                        return false;
                    }
                    
                    const neighborhood = {
                        id: Date.now().toString(),
                        name,
                        fee
                    };
                    
                    this.data.store.neighborhoods.push(neighborhood);
                    this.renderNeighborhoods();
                    this.showMessage('Bairro adicionado com sucesso!', 'success');
                    return true;
                });
            }

            editNeighborhood(id) {
                const neighborhood = this.data.store.neighborhoods.find(n => n.id === id);
                if (!neighborhood) return;

                this.showModal('Editar Bairro', `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Nome do Bairro</label>
                            <input type="text" id="neighborhoodName" value="${neighborhood.name}" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Taxa de Entrega (R$)</label>
                            <input type="number" id="neighborhoodFee" value="${neighborhood.fee}" step="0.01" min="0" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                    </div>
                `, () => {
                    const name = document.getElementById('neighborhoodName').value.trim();
                    const fee = parseFloat(document.getElementById('neighborhoodFee').value) || 0;
                    
                    if (!name) {
                        this.showMessage('Nome do bairro √© obrigat√≥rio', 'error');
                        return false;
                    }
                    
                    neighborhood.name = name;
                    neighborhood.fee = fee;
                    
                    this.renderNeighborhoods();
                    this.showMessage('Bairro atualizado com sucesso!', 'success');
                    return true;
                });
            }

            deleteNeighborhood(id) {
                if (confirm('Tem certeza que deseja excluir este bairro?')) {
                    this.data.store.neighborhoods = this.data.store.neighborhoods.filter(n => n.id !== id);
                    this.renderNeighborhoods();
                    this.showMessage('Bairro exclu√≠do com sucesso!', 'success');
                }
            }

            // CRUD Methods for Categories
            createCategory() {
                this.showModal('Criar Categoria', `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Nome da Categoria</label>
                            <input type="text" id="categoryName" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Subcategoria (opcional)</label>
                            <input type="text" id="categorySubcategory" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                    </div>
                `, () => {
                    const name = document.getElementById('categoryName').value.trim();
                    const subcategory = document.getElementById('categorySubcategory').value.trim();
                    
                    if (!name) {
                        this.showMessage('Nome da categoria √© obrigat√≥rio', 'error');
                        return false;
                    }
                    
                    const category = {
                        id: Date.now().toString(),
                        name,
                        subcategory: subcategory || null
                    };
                    
                    this.data.items.categories.push(category);
                    this.renderCategories();
                    this.showMessage('Categoria criada com sucesso!', 'success');
                    return true;
                });
            }

            editCategory(id) {
                const category = this.data.items.categories.find(c => c.id === id);
                if (!category) return;

                this.showModal('Editar Categoria', `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Nome da Categoria</label>
                            <input type="text" id="categoryName" value="${category.name}" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Subcategoria (opcional)</label>
                            <input type="text" id="categorySubcategory" value="${category.subcategory || ''}" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                    </div>
                `, () => {
                    const name = document.getElementById('categoryName').value.trim();
                    const subcategory = document.getElementById('categorySubcategory').value.trim();
                    
                    if (!name) {
                        this.showMessage('Nome da categoria √© obrigat√≥rio', 'error');
                        return false;
                    }
                    
                    category.name = name;
                    category.subcategory = subcategory || null;
                    
                    this.renderCategories();
                    this.showMessage('Categoria atualizada com sucesso!', 'success');
                    return true;
                });
            }

            deleteCategory(id) {
                if (confirm('Tem certeza que deseja excluir esta categoria?')) {
                    this.data.items.categories = this.data.items.categories.filter(c => c.id !== id);
                    this.renderCategories();
                    this.showMessage('Categoria exclu√≠da com sucesso!', 'success');
                }
            }

            // CRUD Methods for Items
            addItem() {
                const categoriesOptions = this.data.items.categories.map(cat => 
                    `<option value="${cat.name}">${cat.name}${cat.subcategory ? ' ‚Üí ' + cat.subcategory : ''}</option>`
                ).join('');

                this.showModal('Adicionar Item', `
                    <div class="space-y-4">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Nome do Item</label>
                                <input type="text" id="itemName" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Pre√ßo (R$)</label>
                                <input type="number" id="itemPrice" step="0.01" min="0" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Categoria</label>
                            <select id="itemCategory" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="">Selecione uma categoria</option>
                                ${categoriesOptions}
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Descri√ß√£o</label>
                            <textarea id="itemDescription" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">URL da Imagem</label>
                            <input type="url" id="itemImage" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="flex items-center">
                                <input type="checkbox" id="itemActive" checked class="rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                <span class="ml-2 text-sm text-gray-700">Item ativo</span>
                            </label>
                        </div>
                    </div>
                `, () => {
                    const name = document.getElementById('itemName').value.trim();
                    const price = parseFloat(document.getElementById('itemPrice').value) || 0;
                    const category = document.getElementById('itemCategory').value;
                    const description = document.getElementById('itemDescription').value.trim();
                    const image = document.getElementById('itemImage').value.trim();
                    const active = document.getElementById('itemActive').checked;
                    
                    if (!name || !category || price <= 0) {
                        this.showMessage('Nome, categoria e pre√ßo s√£o obrigat√≥rios', 'error');
                        return false;
                    }
                    
                    const item = {
                        id: Date.now().toString(),
                        name,
                        price,
                        category,
                        description,
                        image,
                        active
                    };
                    
                    this.data.items.products.push(item);
                    this.renderItems();
                    this.showMessage('Item adicionado com sucesso!', 'success');
                    return true;
                });
            }

            editItem(id) {
                const item = this.data.items.products.find(i => i.id === id);
                if (!item) return;

                const categoriesOptions = this.data.items.categories.map(cat => 
                    `<option value="${cat.name}" ${cat.name === item.category ? 'selected' : ''}>${cat.name}${cat.subcategory ? ' ‚Üí ' + cat.subcategory : ''}</option>`
                ).join('');

                this.showModal('Editar Item', `
                    <div class="space-y-4">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Nome do Item</label>
                                <input type="text" id="itemName" value="${item.name}" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Pre√ßo (R$)</label>
                                <input type="number" id="itemPrice" value="${item.price}" step="0.01" min="0" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Categoria</label>
                            <select id="itemCategory" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="">Selecione uma categoria</option>
                                ${categoriesOptions}
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Descri√ß√£o</label>
                            <textarea id="itemDescription" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none">${item.description || ''}</textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">URL da Imagem</label>
                            <input type="url" id="itemImage" value="${item.image || ''}" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="flex items-center">
                                <input type="checkbox" id="itemActive" ${item.active ? 'checked' : ''} class="rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                <span class="ml-2 text-sm text-gray-700">Item ativo</span>
                            </label>
                        </div>
                    </div>
                `, () => {
                    const name = document.getElementById('itemName').value.trim();
                    const price = parseFloat(document.getElementById('itemPrice').value) || 0;
                    const category = document.getElementById('itemCategory').value;
                    const description = document.getElementById('itemDescription').value.trim();
                    const image = document.getElementById('itemImage').value.trim();
                    const active = document.getElementById('itemActive').checked;
                    
                    if (!name || !category || price <= 0) {
                        this.showMessage('Nome, categoria e pre√ßo s√£o obrigat√≥rios', 'error');
                        return false;
                    }
                    
                    item.name = name;
                    item.price = price;
                    item.category = category;
                    item.description = description;
                    item.image = image;
                    item.active = active;
                    
                    this.renderItems();
                    this.showMessage('Item atualizado com sucesso!', 'success');
                    return true;
                });
            }

            deleteItem(id) {
                if (confirm('Tem certeza que deseja excluir este item?')) {
                    this.data.items.products = this.data.items.products.filter(i => i.id !== id);
                    this.renderItems();
                    this.showMessage('Item exclu√≠do com sucesso!', 'success');
                }
            }

            // Placeholder methods for other CRUD operations
            createPromotion() {
                this.showMessage('Funcionalidade em desenvolvimento', 'info');
            }

            editPromotion(id) {
                this.showMessage('Funcionalidade em desenvolvimento', 'info');
            }

            deletePromotion(id) {
                this.showMessage('Funcionalidade em desenvolvimento', 'info');
            }

            createMode() {
                this.showMessage('Funcionalidade em desenvolvimento', 'info');
            }

            editMode(id) {
                this.showMessage('Funcionalidade em desenvolvimento', 'info');
            }

            deleteMode(id) {
                this.showMessage('Funcionalidade em desenvolvimento', 'info');
            }

            createCoupon() {
                this.showMessage('Funcionalidade em desenvolvimento', 'info');
            }

            editCoupon(id) {
                this.showMessage('Funcionalidade em desenvolvimento', 'info');
            }

            deleteCoupon(id) {
                this.showMessage('Funcionalidade em desenvolvimento', 'info');
            }

            addSocial() {
                this.showMessage('Funcionalidade em desenvolvimento', 'info');
            }

            editSocial(id) {
                this.showMessage('Funcionalidade em desenvolvimento', 'info');
            }

            deleteSocial(id) {
                this.showMessage('Funcionalidade em desenvolvimento', 'info');
            }

            // Modal helper method
            showModal(title, content, onConfirm) {
                const modal = document.createElement('div');
                modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
                modal.innerHTML = `
                    <div class="modal-content bg-white rounded-xl p-4 lg:p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto">
                        <h3 class="text-base lg:text-lg font-semibold mb-4">${title}</h3>
                        ${content}
                        <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3 pt-6">
                            <button onclick="this.closest('.fixed').remove()" class="flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 text-sm lg:text-base">
                                Cancelar
                            </button>
                            <button id="confirmBtn" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm lg:text-base">
                                Confirmar
                            </button>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(modal);
                
                if (onConfirm) {
                    modal.querySelector('#confirmBtn').addEventListener('click', () => {
                        if (onConfirm()) {
                            modal.remove();
                        }
                    });
                }
                
                // Close on outside click
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        modal.remove();
                    }
                });
            }

            setPreviewMode(mode) {
                const container = document.getElementById('previewContainer');
                const desktopBtn = document.getElementById('previewDesktop');
                const mobileBtn = document.getElementById('previewMobile');
                
                if (mode === 'desktop') {
                    container.className = 'preview-desktop';
                    desktopBtn.classList.add('bg-blue-600', 'text-white');
                    desktopBtn.classList.remove('bg-gray-600');
                    mobileBtn.classList.add('bg-gray-600');
                    mobileBtn.classList.remove('bg-blue-600', 'text-white');
                } else {
                    container.className = 'preview-mobile';
                    mobileBtn.classList.add('bg-blue-600', 'text-white');
                    mobileBtn.classList.remove('bg-gray-600');
                    desktopBtn.classList.add('bg-gray-600');
                    desktopBtn.classList.remove('bg-blue-600', 'text-white');
                }
            }

            updatePreview() {
                // Generate totem HTML and display in iframe
                const totemHTML = this.generateTotemHTML();
                const iframe = document.getElementById('previewFrame');
                iframe.srcdoc = totemHTML;
            }

            generateTotemHTML() {
                const storeData = this.data.store;
                const customData = this.data.customization;
                const itemsData = this.data.items;
                
                const activeItems = itemsData.products.filter(item => item.active);
                
                // Build items HTML safely
                let itemsHTML = '';
                if (activeItems.length > 0) {
                    const itemElements = [];
                    for (const item of activeItems) {
                        let itemElement = '<div class="bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition-shadow">';
                        
                        if (item.image) {
                            itemElement += '<img src="' + item.image + '" alt="' + item.name + '" class="w-full h-32 object-cover rounded-lg mb-3" onerror="this.style.display=\'none\'">';
                        }
                        
                        itemElement += '<h3 class="font-semibold text-lg mb-2">' + item.name + '</h3>';
                        
                        if (item.description) {
                            itemElement += '<p class="text-gray-600 text-sm mb-3">' + item.description + '</p>';
                        }
                        
                        itemElement += '<p class="text-xl font-bold text-green-600 mb-3">R$ ' + item.price.toFixed(2) + '</p>';
                        itemElement += '<button class="w-full px-4 py-2 rounded-lg text-white font-medium hover:opacity-90 transition-opacity" style="background-color: ' + (customData.colors.primary || '#3B82F6') + '">Adicionar ao Carrinho</button>';
                        itemElement += '</div>';
                        
                        itemElements.push(itemElement);
                    }
                    itemsHTML = itemElements.join('');
                } else {
                    itemsHTML = '<p class="text-gray-500 text-lg col-span-full">Nenhum item dispon√≠vel no momento</p>';
                }
                
                // Build other HTML elements safely
                let logoHTML = '';
                if (storeData.logo) {
                    logoHTML = '<img src="' + storeData.logo + '" alt="Logo da Loja" class="mx-auto mb-4 h-20 object-contain" onerror="this.style.display=\'none\'">';
                }
                
                let addressHTML = '';
                if (storeData.address) {
                    addressHTML = '<p class="text-gray-600 mb-1">' + storeData.address + '</p>';
                }
                
                let phoneHTML = '';
                if (storeData.phone) {
                    phoneHTML = '<p class="text-gray-600 mb-1">' + storeData.phone + '</p>';
                }
                
                let hoursHTML = '';
                if (storeData.hours) {
                    hoursHTML = '<p class="text-gray-600">' + storeData.hours + '</p>';
                }
                
                let backgroundStyle = '';
                if (customData.background.image) {
                    backgroundStyle = 'background-image: url(' + customData.background.image + '); background-size: cover; background-position: center;';
                }
                
                // Build final HTML
                let html = '<!DOCTYPE html>\n';
                html += '<html lang="pt-BR">\n';
                html += '<head>\n';
                html += '    <meta charset="UTF-8">\n';
                html += '    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n';
                html += '    <title>' + (storeData.name || 'Loja Digital') + '</title>\n';
                html += '    <script src="https://cdn.tailwindcss.com"><\/script>\n';
                html += '    <style>\n';
                html += '        body { \n';
                html += '            background-color: ' + (customData.background.color || '#F3F4F6') + ';\n';
                html += '            ' + backgroundStyle + '\n';
                html += '        }\n';
                html += '    </style>\n';
                html += '</head>\n';
                html += '<body class="min-h-screen">\n';
                html += '    <div class="container mx-auto px-4 py-8">\n';
                html += '        <header class="text-center mb-8 bg-white bg-opacity-90 rounded-lg p-6">\n';
                html += '            ' + logoHTML + '\n';
                html += '            <h1 class="text-3xl font-bold mb-2" style="color: ' + (customData.colors.primary || '#3B82F6') + '">' + (storeData.name || 'Loja Digital') + '</h1>\n';
                html += '            ' + addressHTML + '\n';
                html += '            ' + phoneHTML + '\n';
                html += '            ' + hoursHTML + '\n';
                html += '        </header>\n';
                html += '        \n';
                html += '        <div class="text-center">\n';
                html += '            <h2 class="text-2xl font-semibold mb-6" style="color: ' + (customData.colors.primary || '#3B82F6') + '">Card√°pio</h2>\n';
                html += '            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">\n';
                html += '                ' + itemsHTML + '\n';
                html += '            </div>\n';
                html += '        </div>\n';
                html += '    </div>\n';
                html += '</body>\n';
                html += '</html>';
                
                return html;
            }

            enableEdit() {
                this.showMessage('Modo de edi√ß√£o ativado', 'info');
            }

            importData() {
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = '.json';
                input.onchange = (e) => {
                    const file = e.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = (e) => {
                            try {
                                this.data = JSON.parse(e.target.result);
                                this.saveData();
                                this.loadFormData();
                                this.renderAll();
                                this.showMessage('Dados importados com sucesso!', 'success');
                            } catch (error) {
                                this.showMessage('Erro ao importar dados', 'error');
                            }
                        };
                        reader.readAsText(file);
                    }
                };
                input.click();
            }

            exportData() {
                const dataStr = JSON.stringify(this.data, null, 2);
                const dataBlob = new Blob([dataStr], { type: 'application/json' });
                const url = URL.createObjectURL(dataBlob);
                const link = document.createElement('a');
                link.href = url;
                link.download = 'loja-dados.json';
                link.click();
                URL.revokeObjectURL(url);
                this.showMessage('Dados exportados com sucesso!', 'success');
            }

            publishTotem() {
                // Modal for BinID and Master Key
                const modal = document.createElement('div');
                modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
                modal.innerHTML = `
                    <div class="modal-content bg-white rounded-xl p-4 lg:p-6 w-full max-w-md">
                        <h3 class="text-base lg:text-lg font-semibold mb-4">Publicar Totem</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">BinID</label>
                                <input type="text" id="binId" class="w-full px-3 lg:px-4 py-2 lg:py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm lg:text-base">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Chave Master</label>
                                <input type="password" id="masterKey" class="w-full px-3 lg:px-4 py-2 lg:py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm lg:text-base">
                            </div>
                            <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3 pt-4">
                                <button onclick="this.closest('.fixed').remove()" class="flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 text-sm lg:text-base">
                                    Cancelar
                                </button>
                                <button onclick="storeManager.doPublish(document.getElementById('binId').value, document.getElementById('masterKey').value); this.closest('.fixed').remove()" class="flex-1 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm lg:text-base">
                                    Publicar
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                document.body.appendChild(modal);
            }

            doPublish(binId, masterKey) {
                if (!binId || !masterKey) {
                    this.showMessage('BinID e Chave Master s√£o obrigat√≥rios', 'error');
                    return;
                }
                
                // Simulate publishing to JSONBin
                this.showMessage('Totem publicado com sucesso!', 'success');
                localStorage.setItem('publishedBinId', binId);
            }

            visitTotem() {
                const binId = localStorage.getItem('publishedBinId');
                if (binId) {
                    window.open(`https://api.jsonbin.io/v3/b/${binId}/latest`, '_blank', 'noopener,noreferrer');
                } else {
                    this.showMessage('Nenhum totem publicado ainda', 'error');
                }
            }

            showMessage(text, type = 'info') {
                const container = document.getElementById('messageContainer');
                const message = document.createElement('div');
                const colors = {
                    success: 'bg-green-500',
                    error: 'bg-red-500',
                    info: 'bg-blue-500'
                };
                
                message.className = `${colors[type]} text-white px-6 py-3 rounded-lg shadow-lg slide-down`;
                message.textContent = text;
                
                container.appendChild(message);
                setTimeout(() => message.remove(), 3000);
            }
        }

        // Initialize the application
        const storeManager = new StoreManager();

        // Handle window resize
        window.addEventListener('resize', () => {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('mobileOverlay');
            
            if (window.innerWidth >= 1024) {
                // Desktop - close mobile sidebar if open
                sidebar.classList.remove('open');
                overlay.classList.remove('active');
            }
        });

        // Close mobile sidebar when clicking on tab
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                if (window.innerWidth < 1024) {
                    storeManager.closeMobileSidebar();
                }
            });
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'989e80f104af82df',t:'MTc1OTY4MzkyNC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
